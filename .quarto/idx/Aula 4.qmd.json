{"title":"Gráficos em ggplot","markdown":{"yaml":{"title":"Gráficos em ggplot","format":"html"},"headingText":"Depois de carregar o pacote de interesse e trazer os dados que serão trabalhados para dentro do R, começamos a construção do gráfico. É importante lembrar que o pacote \"ggplot2\", responsável pela construção dos gráfico, está dentro do pacote \"tidyverse\".","containsRefs":false,"markdown":"\n\nNo ggplot, os gráficos são construídos camada por camada. A primeira camada é dada pela função \"ggplot()\", onde é determinada a estética da distribuição dos dados que serão trabalhados. A segunda camada é dada pela função \"geom_()\" que vai definir o tipo de gráfico gerado.\n\n```{r}\nwarning(FALSE)\n\nlibrary (tidyverse)\n\nmg <- read_csv(\"dados-diversos.csv\")\n\n\nmg |> ggplot (aes(Irrigation, severity, shape = Irrigation))+\n  geom_point(alpha = 0.5)\n\n#A função escolhida para gerar a segunda camada do gráfico foi \"geom_point()\", gerando um gráfico de pontos ou dispersão.\n\n```\n\nÉ possível ainda criar um subconjunto de um data frame, usando a função \"filter()\".\n\n```{r}\nmg |> \n  filter (rep == 1) |> \n  ggplot (aes(day,severity, shape = Irrigation))+\n  geom_point(alpha = 0.5)+\n  geom_line()+\n  facet_wrap(~rep)\n\n#É interessante que existe a possibilidade trabalhar diferentes modelos de gráficos para melhor explorar os dados, como nesse caso onde foi usado \"geom_point()\" e \"geom_line()\".\n\n#Uma outra observação interessante é a função \"facet\". Essa é uma funcionalidade útil do \"ggplot2\", pois permite usar facets para replicar um gráfico para cada categoria de uma variável.\n\n```\n\n```{r}\nmg |> \n  filter (rep == 2) |> \n  ggplot (aes(day,severity, shape = Irrigation))+\n  geom_point(alpha = 0.5)+\n  geom_line()\n\n```\n\n```{r}\nmg |> \n  filter (rep == 3) |> \n  ggplot (aes(day,severity, shape = Irrigation))+\n  geom_point(alpha = 0.5)+\n  geom_line()\n\n```\n\nCom a função \"select()\" é possível selecionar as colunas de interesse.\n\n```{r}\nmg |> \n  select (Irrigation, severity) |> \n  ggplot (aes(Irrigation, severity, shape = Irrigation))+\n  geom_point(alpha = 0.5)+\n  geom_line()\n\n```\n\n```{r}\nmg |> \n  select (Irrigation, severity) |> \n  ggplot (aes(Irrigation, severity, shape = Irrigation))+\n  geom_boxplot()\n\n```\n\n```{r}\nmg |> \n  select (Irrigation, severity) |> \n  ggplot (aes(Irrigation, severity, shape = Irrigation))+\n  geom_boxplot()+\n  geom_point(alpha = 0.5)\n\n```\n\n```{r}\nmg |> \n  select (day, rep, severity) |> \n  ggplot (aes(day, severity))+\n  geom_boxplot()\n\n```\n\n```{r}\nmg |> select (day, rep, severity) |> \n  ggplot (aes(day, severity))+\n  geom_boxplot()+\n  geom_point(alpha = 0.5)\n```\n\n```{r}\nmg |> \n  select (day, rep, severity) |> \n  ggplot (aes(day, severity, group = day))+\n  geom_boxplot()\n\n```\n\n```{r}\nmg |> \n  select (day, rep, severity) |> \n  ggplot(aes(day, severity, group = day))+\n  geom_point()\n```\n\n```{r}\nmg |> \n  select (day, rep, severity) |> \n  ggplot (aes(day, severity))+\n  geom_point()\n```\n\nCom a função \"group_by()\" a variável existente é convertida é um agrupado onde as operações são executadas por um grupo. Já a função \"summarize()\" resume um conjunto de dados utilizando alguma métrica de interesse.\n\n```{r}\nmg |> \n  select (day, rep, severity) |> \n  group_by (day) |> \n  summarize(sev = mean (severity)) |> \n  ggplot (aes(day, sev))+\n  geom_point()\n\n```\n\n```{r}\nmg2 <- mg |> \n  select (day, rep, severity) |> \n  group_by (day) |> \n  summarize(sev = mean (severity))\n```\n\n```{r}\nmg2 |> \n  ggplot (aes(day, sev))+\n  geom_point()\n\n```\n\n```{r}\nmg2 |> \n  ggplot (aes(day, sev))+\n  geom_point()+\n  geom_line()\n\n```\n\nCom o gráfico pronto é possível adicionar a ele título, subtítulo, legenda, fonte e qualquer outra informação que for interessante ser apresentadada. Essas informações também são consideradas camadas e são criadss ou modificados pela função \"labs()\".\n\n```{r}\nmg2 |> \n  ggplot (aes(day, sev))+\n  geom_point()+\n  geom_line()+\n  labs (x = \"Time (days)\", y = \"Severity (Proportion)\")\n```\n\n```{r}\nmg2 |> \n  ggplot (aes(day, sev*100))+\n  geom_point()+\n  geom_line()+\n  labs (x = \"Time (days)\", y = \"Severity (%)\")\n\n#\"*100\" para respostas em porcentagem.\n\n```\n\n```{r}\nmg2 |> \n  ggplot (aes(day, sev*100))+\n  geom_point()+\n  geom_line()+\n  ylim (0,100)+\n  labs (x = \"Time (days)\", y = \"Severity (%)\", \n        title = \"My first ggplot\", \n        subtitle = \"D. Rodrigues\", \n        caption = \"Source: FIP 606\")\n```\n\n```{r}\nmg2 |> \n  ggplot (aes(day, sev*100))+\n  geom_point()+\n  geom_line()+\n  labs (x = \"Time (days)\", y = \"Severity (%)\")\n```\n\n```{r}\nmg2 |> \n  ggplot (aes(day, sev*100))+\n  geom_point()+\n  geom_line()+\n  ylim (0,100)+\n  labs (x = \"Time (days)\", y = \"Severity (%)\", \n        title = \"My first ggplot\", subtitle = \"D. Rodrigues\", \n        caption = \"Source: FIP 606\")+\n  theme_minimal()\n\n#\"theme_()\" permite escolher um tema para o gráfico, que vai variar de acordo com a escolha de cada um.\n\n```\n\nDentro da função \"geom_()\" é possível personalizar a apresentação das formas que foram definidas para o gráfico, adicionando cores, linhas mais expressivas, pontos maiores, etc.\n\n```{r}\nmg2 |> \n  ggplot (aes(day, sev*100))+\n  geom_point(size = 3, color = \"orange\")+\n  geom_line(color = \"orange\")+\n  ylim (0,100)+\n  labs (x = \"Time (days)\", y = \"Severity (%)\", \n        title = \"My first ggplot\", subtitle = \"D. Rodrigues\", \n        caption = \"Source: FIP 606\")+\n  theme_minimal()\n\n#\"ylim()\" permite escolher os valores de variação do eixo y.\n\n```\n\n```{r}\nmg2 |> \n  ggplot (aes(day, sev*100))+\n  geom_point(size = 3, color = \"orange\")+\n  geom_line(color = \"orange\")+\n  ylim (0,100)+\n  scale_x_continuous(breaks = c(0, 7, 14, 21, 28, 35, 42, 49, 56, 63))+\n  labs (x = \"Time (days)\", y = \"Severity (%)\", \n        title = \"My first ggplot\", subtitle = \"D. Rodrigues\", \n        caption = \"Source: FIP 606\")+\n  theme_minimal()\n\n#\"scale_x_continuous()\" permite escolher os valores de variação do eixo x.\n\n#Para salvar seu gráfico em forma de imagem, use a função \"ggsave()\", escolha um nome e na frente \".png\". É possível também definir a cor de fundo da imagem que o gráfico será salvo, bem como suas dimensões.\n\nggsave(\"myfirstggplot.png\", bg = \"white\", width = 4, height = 3)\n```\n\n```{r}\nmg2 |> \n  ggplot (aes(day, sev*100))+\n  geom_line(color = \"orange\")+\n  geom_point(size = 3, color = \"orange\")+\n  scale_x_continuous(breaks = c(0, 7, 14, 21, 28, 35, 42, 49, 56, 63))+\n  scale_x_continuous(n.breaks = 5, limits = c(0,100))+\n  labs (x = \"Time (days)\", y = \"Severity (%)\", \n        title = \"My first ggplot\", subtitle = \"D. Rodrigues\", \n        caption = \"Source: FIP 606\")+\n  theme_minimal()\n\nggsave(\"myfirstggplot.png\", bg = \"white\", width = 4, height = 3)\n```\n\n"},"formats":{"html":{"execute":{"fig-width":7,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":true,"freeze":"auto","echo":true,"output":true,"warning":false,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"engine":"knitr"},"render":{"keep-tex":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":"none","code-overflow":"scroll","code-link":false,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":"auto","merge-includes":true,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[]},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","to":"html","css":["styles.css"],"toc":true,"output-file":"Aula 4.html"},"language":{},"metadata":{"lang":"en","fig-responsive":true,"quarto-version":"1.2.269","editor":"visual","theme":"superhero","title":"Gráficos em ggplot"},"extensions":{"book":{"multiFile":true}}}}}