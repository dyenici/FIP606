{"title":"Gráficos, Tabelas e Mapas interativos","markdown":{"yaml":{"title":"Gráficos, Tabelas e Mapas interativos","format":"html"},"headingText":"Pacote \"Plotly\"","containsRefs":false,"markdown":"\n\nO Plotly traduz de maneira fácil gráficos do ggplot2 para uma versão interativa na web ou cria uma visualização na web customizável diretamente do R via uma uma biblioteca de código aberto para JavaScript (plotly.js).\n\n```{r}\n\nwarning(FALSE)\n\nlibrary(tidyverse)\nlibrary(plotly)\n```\n\n```{r}\nmg <- read_csv(\"dados-diversos.csv\")\n\nmg |> \n  select (day, rep, severity) |> \n  group_by (day) |> \n  summarize(sev = mean (severity)) |> \n  ggplot (aes(day, sev))+\n  geom_point()\n\n```\n\n```{r}\nmg2 <- mg |> \n  select (day, rep, severity) |> \n  group_by (day) |> \n  summarize(sev = mean (severity))\n```\n\n```{r}\np <- mg2 |> \n  ggplot (aes(day, sev*100))+\n  geom_line(color = \"orange\")+\n  geom_point(size = 3, color = \"orange\")+\n  scale_x_continuous(breaks = c(0, 7, 14, 21, 28, 35, 42, 49, 56, 63))+\n  scale_y_continuous(n.breaks = 5, limits = c(0,100))+\n  labs (x = \"Time (days)\", y = \"Severity (%)\", \n        title = \"My first ggplot\", subtitle = \"D. Rodrigues\", \n        caption = \"Source: FIP 606\")+\n  theme_minimal()\n```\n\n```{r}\nggplotly (p)\n\nplot_ly (mg2, x = ~ day, \n         y= ~sev, \n         type= 'scatter', \n         mode='dots')\n```\n\n## Mapas interativos\n\n```{r}\nlibrary(rnaturalearth)\nlibrary(rnaturalearthhires)\nlibrary(r4pde)\nlibrary(tidyr)\n\nsbr <- RustSoybean\nsbr2 <- sbr|> separate (planting, into = c(\"year\",\"month\", \"day\"), sep= \"-\",\n           remove= FALSE)\n\nBRA <- ne_countries(country= \"Brazil\",\n                    returnclass= \"sf\")\n```\n\n```{r}\nggplot(BRA)+\n  geom_sf(color= \"white\",\n          fill = \"darkgreen\")+\n  theme_classic()\n\nBRA <- ne_states(country= \"Brazil\",\n                    returnclass= \"sf\")\nMG <- BRA |> filter(name_en == \"Minas Gerais\")\n```\n\n```{r}\nlibrary(ggsn)\n\nr <- ggplot(BRA)+\n  geom_sf(color= \"black\",\n          fill = \"white\")+\n  geom_sf(data= MG, color = \"black\", fill= \"darkblue\")+\n  geom_point(data=sbr, aes(longitude,latitude), alpha = 0.5)\n  theme_void()\n\nggplotly (r)\n```\n\n```{r}\nlibrary(readxl)\n\nsurvey <- read_excel (\"dados-diversos.xlsx\", \"survey\")\n\nlibrary(DT)\n\ndatatable(survey, \n          extensions = 'Buttons',\n          options = list(\n            dom = \"Bfritp\",\n            buttons = c('copy', 'excel')))\n\n```\n\n## Pacote \"Leaflet\"\nUma das bibliotecas JavaScript mais populares para a criação de mapas interativos. Esse pacote permite gerar esses mapas de forma direta no R, para usar em documentos RMarkdown e Shiny.\n\n```{r}\nlibrary(leaflet)\n\nlat= -20.7474\nlong= -42.883\ndat <- data.frame(lat, long)\n\ndat |>  \n  leaflet() |> \n  addTiles() |> \n  addMarkers()\n```\n\n```{r}\nlat= -17.7211\nlong= -49.1081\ndat2 <- data.frame(lat, long)\n\ndat2 |>  \n  leaflet() |> \n  addProviderTiles(providers$Esri.WorldImagery) |> \n  addMarkers()\n```\n\n"},"formats":{"html":{"execute":{"fig-width":7,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":true,"freeze":"auto","echo":true,"output":true,"warning":false,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"engine":"knitr"},"render":{"keep-tex":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":"none","code-overflow":"scroll","code-link":false,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":"auto","merge-includes":true,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[]},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","to":"html","css":["styles.css"],"toc":true,"output-file":"Aula 19.html"},"language":{},"metadata":{"lang":"en","fig-responsive":true,"quarto-version":"1.2.269","editor":"visual","theme":"superhero","title":"Gráficos, Tabelas e Mapas interativos"},"extensions":{"book":{"multiFile":true}}}}}